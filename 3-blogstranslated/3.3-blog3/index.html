<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 3 :: Internship Report</title>
<link href=../../css/nucleus.css?1761558091 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1761558091 rel=stylesheet><link href=../../css/hybrid.css?1761558091 rel=stylesheet><link href=../../css/featherlight.min.css?1761558091 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1761558091 rel=stylesheet><link href=../../css/auto-complete.css?1761558091 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1761558091 rel=stylesheet><link href=../../css/theme.css?1761558091 rel=stylesheet><link href=../../css/hugo-theme.css?1761558091 rel=stylesheet><link href=../../css/theme-workshop.css?1761558091 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1761558091></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.3-blog3/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1761558091></script><script type=text/javascript src=../../js/auto-complete.js?1761558091></script><script type=text/javascript>var baseurl="https://veljg.github.io/AWS-Worklog/"</script><script type=text/javascript src=../../js/search.js?1761558091></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Week 9 Worklog" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Week 9 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Week 10 Worklog" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Week 10 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Week 11 Worklog" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Week 11 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Week 12 Worklog" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12. </b>Week 12 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class="dd-item
active"><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.4-blog4/ title="Blog 4" class=dd-item><a href=../../3-blogstranslated/3.4-blog4/><b>3.4. </b>Blog 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.5-blog5/ title="Blog 5" class=dd-item><a href=../../3-blogstranslated/3.5-blog5/><b>3.5. </b>Blog 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.6-blog6/ title="Blog 6" class=dd-item><a href=../../3-blogstranslated/3.6-blog6/><b>3.6. </b>Blog 6
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Introduction class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Introduction
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Prerequiste class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequiste
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/ title="Access S3 from VPC" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/><b>5.3. </b>Access S3 from VPC
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.1-create-gwe/ title="Create a gateway endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.1-create-gwe/><b>5.3.1 </b>Create a gateway endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-s3-vpc/5.3.2-test-gwe/ title="Test the Gateway Endpoint" class=dd-item><a href=../../5-workshop/5.3-s3-vpc/5.3.2-test-gwe/><b>5.3.2 </b>Test the Gateway Endpoint
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.4-s3-onprem/ title="Access S3 from on-premises" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/><b>5.4. </b>Access S3 from on-premises
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.1-prepare/ title="Prepare the environment" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.1-prepare/><b>5.4.1 </b>Prepare the environment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/ title="Create an S3 Interface endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.2-create-interface-enpoint/><b>5.4.2 </b>Create an S3 Interface endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/ title="Test the Interface Endpoint" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.3-test-endpoint/><b>5.4.3 </b>Test the Interface Endpoint
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/ title="On-premises DNS Simulation" class=dd-item><a href=../../5-workshop/5.4-s3-onprem/5.4.4-dns-simulation/><b>5.4.4 </b>On-premises DNS Simulation
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/5.5-policy/ title="VPC Endpoint Policies" class=dd-item><a href=../../5-workshop/5.5-policy/><b>5.5. </b>VPC Endpoint Policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-cleanup/ title="Clean up" class=dd-item><a href=../../5-workshop/5.6-cleanup/><b>5.6. </b>Clean up
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://veljg.github.io/AWS-Worklog/3-blogstranslated/3.3-blog3/ selected>English</option><option id=vi value=https://veljg.github.io/AWS-Worklog/vi/3-blogstranslated/3.3-blog3/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 3</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#blog-aws-cloud-operationshttpsawsamazoncomblogsmt><a href=https://aws.amazon.com/blogs/mt/>Blog AWS Cloud Operations</a></a></li></ul><ul><li><a href=#tổng-quan-về-giải-pháp><strong>Tổng quan về giải pháp</strong></a></li><li><a href=#lợi-ích-chính><strong>Lợi ích chính</strong></a></li><li><a href=#hướng-dẫn-triển-khai><strong>Hướng dẫn triển khai</strong></a></li><li><a href=#điều-kiện-tiên-quyết><strong>Điều kiện tiên quyết</strong></a></li><li><a href=#bước-1-triển-khai-mẫu-cloudformation><strong>Bước 1: Triển khai mẫu CloudFormation</strong></a></li><li><a href=#các-tham-số-thí-nghiệm-có-thể-định-cấu-hình><strong>Các tham số thí nghiệm có thể định cấu hình</strong></a></li><li><a href=#bước-2-xác-minh-hàm-lambda><strong>Bước 2: Xác minh Hàm Lambda</strong></a></li><li><a href=#bước-3-bắt-đầu-thí-nghiệm-aws-fis><strong>Bước 3: Bắt đầu Thí nghiệm AWS FIS</strong></a></li><li><a href=#bước-4-quan-sát-và-phân-tích-kết-quả><strong>Bước 4: Quan sát và phân tích kết quả</strong></a></li><li><a href=#cơ-chế-khôi-phục><strong>Cơ chế khôi phục</strong></a></li><li><a href=#các-điểm-cần-cân-nhắc><strong>Các điểm cần cân nhắc</strong></a></li><li><a href=#dọn-dẹp><strong>Dọn dẹp</strong></a></li><li><a href=#kết-luận><strong>Kết luận</strong></a><ul><li><a href=#ozgur-canibeyaz>Ozgur Canibeyaz</a></li><li><a href=#pablo-colazurdo>Pablo Colazurdo</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 3</h1><h2 id=blog-aws-cloud-operationshttpsawsamazoncomblogsmt><a href=https://aws.amazon.com/blogs/mt/>Blog AWS Cloud Operations</a></h2><h1 id=mô-phỏng-lỗi-cục-bộ-với-aws-fault-injection-service>Mô phỏng lỗi cục bộ với AWS Fault Injection Service</h1><p>bởi Ozgur Canibeyaz và Pablo Colazurdo vào ngày 30 THÁNG 6 2025 trong <a href=https://aws.amazon.com/blogs/mt/category/developer-tools/aws-fault-injection-service-fis/%22>AWS Fault Injection Service (FIS)</a>, <a href=https://aws.amazon.com/blogs/mt/category/management-and-governance/aws-resilience-hub/>AWS Resilience Hub (ARH)</a>, <a href=https://aws.amazon.com/blogs/mt/category/management-tools/aws-systems-manager/>AWS Systems Manager</a>, <a href=https://aws.amazon.com/blogs/mt/category/management-tools/>Management Tools</a>, <a href=https://aws.amazon.com/blogs/mt/category/resilience>Resilience</a>, <a href=https://aws.amazon.com/blogs/mt/category/post-types/technical-how-to/>Technical How-to</a> | <a href=https://aws.amazon.com/blogs/mt/simulating-partial-failures-with-aws-fault-injection-service/>Permalink</a> | Chia sẻ</p><p>Các hệ thống phân tán hiện đại phải có khả năng chống chịu lỗi trước các gián đoạn không mong muốn để duy trì tính khả dụng, hiệu suất và độ ổn định. <a href=https://en.wikipedia.org/wiki/Chaos_engineering>Chaos engineering</a> giúp các nhóm phát hiện những điểm yếu tiềm ẩn bằng cách thực hiện fault injection lên hệ thống và quan sát cách nó phục hồi. Trong khi thử nghiệm truyền thống xác thực hành vi mong đợi, chaos engineering kiểm tra khả năng phục hồi của hệ thống trong suốt thời gian xảy ra lỗi. <a href=https://aws.amazon.com/fis/>AWS Fault Injection Service</a> (AWS FIS) là một dịch vụ AWS được quản lý toàn diện giúp các nhóm chạy các thí nghiệm fault injection trên các workloads của AWS. Nó hỗ trợ các tình huống như chấm dứt <a href=https://aws.amazon.com/ec2/>Amazon EC2 instances</a>, điều tiết các <a href=https://aws.amazon.com/api-gateway/>Amazon API Gateway</a> requests, và tạo độ trễ mạng. Điều này cho phép bạn xác thực khả năng phục hồi trong các môi trường giống như môi trường sản xuất. Mặc dù những khả năng này rất mạnh mẽ, nhiều lỗi thực tế chỉ ảnh hưởng đến một phần lưu lượng truy cập.</p><p>Trong bài đăng này, bạn sẽ tìm hiểu cách mô phỏng lỗi cục bộ. Một kiểu lỗi phổ biến nhưng ít được kiểm tra—bằng cách kết hợp AWS FIS với weighted routing trong <a href=https://aws.amazon.com/elasticloadbalancing/application-load-balancer/>Application Load Balancer (ALB)</a> và một hàm <a href=https://aws.amazon.com/lambda/>AWS Lambda</a> trả về các phản hồi lỗi tùy chỉnh. Phương pháp này cho phép bạn kiểm tra cách ứng dụng của bạn xử lý các điều kiện suy giảm mà không cần thay đổi mã hoặc làm gián đoạn luồng truy cập thông thường.</p><h2 id=tổng-quan-về-giải-pháp><strong>Tổng quan về giải pháp</strong></h2><p>Giải pháp của chúng tôi kết hợp AWS FIS với định tuyến có trọng số của ALB để điều hướng một tỷ lệ phần trăm lưu lượng truy cập có thể định cấu hình đến một hàm Lambda có thể trả về các lỗi mô phỏng. Cách tiếp cận này không yêu cầu thay đổi mã nguồn ứng dụng và sẽ tự động khôi phục về hoạt động bình thường sau khi kiểm thử.
<img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/15/Experiment_Flow-1.png></p><p><em>Hình 1 Giải pháp này cho thấy cách sửa đổi Load Balancer của bạn một cách an toàn để mô phỏng lỗi trong quá trình thực hiện thử nghiệm và khôi phục an toàn sau khi kết thúc</em></p><h2 id=lợi-ích-chính><strong>Lợi ích chính</strong></h2><p>Giải pháp này cung cấp các lợi ích chính sau cho các nhóm triển khai kỹ thuật hỗn loạn:</p><ul><li>Mô phỏng lỗi có kiểm soát.</li><li>Không cần sửa đổi ứng dụng.</li><li>Thiết lập và khôi phục tự động.</li><li>Tỷ lệ lỗi có thể định cấu hình.</li></ul><h2 id=hướng-dẫn-triển-khai><strong>Hướng dẫn triển khai</strong></h2><h2 id=điều-kiện-tiên-quyết><strong>Điều kiện tiên quyết</strong></h2><p>Trước khi bắt đầu, hãy xác minh bạn có:</p><ul><li>Một tài khoản AWS với quyền triển khai các stack <a href=https://aws.amazon.com/cloudformation/>AWS CloudFormation</a> và quản lý các thí nghiệm AWS FIS.</li><li>Một ALB hiện có được cấu hình với một target group định tuyến lưu lượng truy cập đến một microservice đang chạy.</li><li>ALB phải đã hoạt động và có thể truy cập công khai để kiểm tra các lỗi mô phỏng.</li><li>Truy cập vào <a href=https://aws.amazon.com/cli/>AWS Command Line Interface</a>(AWS CLI) hoặc AWS Management Console.</li></ul><h2 id=bước-1-triển-khai-mẫu-cloudformation><strong>Bước 1: Triển khai mẫu CloudFormation</strong></h2><p>Mẫu CloudFormation thiết lập tất cả các tài nguyên cần thiết, bao gồm:</p><ul><li>Một hàm Lambda để mô phỏng các phản hồi lỗi.</li><li>Một tài liệu <a href=https://aws.amazon.com/systems-manager/>AWS Systems Manager (SSM)</a> automation.</li><li>Một IAM Role cấp quyền cho AWS FIS để gọi tài liệu SSM Automation.</li><li>Một <a href=https://docs.aws.amazon.com/fis/latest/userguide/experiment-template-example.html>AWS FIS experiment template</a> được cấu hình sẵn.</li></ul><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/15/Overall_Architecture-2.png></p><p><em>Hình 2 Cái nhìn cấp cao về các thành phần giải pháp và sự tương tác của chúng.</em></p><h2 id=các-tham-số-thí-nghiệm-có-thể-định-cấu-hình><strong>Các tham số thí nghiệm có thể định cấu hình</strong></h2><p>Mẫu CloudFormation yêu cầu ba tham số sau khi triển khai:</p><ul><li>Tên Application Load Balancer.</li><li>ARN của Listener ALB rule cần sửa đổi.</li><li>Thời lượng kiểm tra bằng giây — lỗi cục bộ nên kéo dài bao lâu.</li></ul><p>Các cài đặt thí nghiệm khác, chẳng hạn như tỷ lệ phần trăm lưu lượng truy cập cần chuyển hướng và mã phản hồi Lambda, được cấu hình sẵn trong định nghĩa thí nghiệm. Nếu bạn muốn tùy chỉnh các giá trị này, bạn có hai tùy chọn:</p><p><strong>Tùy chọn 1: Sửa đổi Mẫu CloudFormation và triển khai lại</strong></p><p>Bạn có thể chỉnh sửa trường <code>documentParameters</code> trong phần định nghĩa thí nghiệm của mẫu để thay đổi:</p><ul><li>FailurePercentage (ví dụ: 10, 50, 100).</li></ul><p>Để thay đổi HTTP status code được hàm Lambda trả về (ví dụ: từ 500 thành 404), hãy sửa đổi giá trị <code>statusCode</code> trực tiếp trong khối mã nội tuyến bên trong mẫu.</p><p>Sau khi chỉnh sửa, hãy triển khai lại stack để áp dụng các thay đổi của bạn.</p><p><strong>Tùy chọn 2: Tạo phiên bản mới của tài liệu SSM Automation</strong></p><p>Nếu bạn không muốn triển khai lại stack:</p><ol><li>Truy cập vào <strong>AWS Systems Manager</strong> <strong>→</strong> <strong>Documents</strong> console.</li><li>Định vị tài liệu SSM được tạo bởi mẫu.</li><li>Chọn <strong>Create new version</strong> và điều chỉnh các giá trị mặc định như FailurePercentage.</li><li>Sử dụng phiên bản đã cập nhật bằng cách tham chiếu nó trong một thí nghiệm AWS FIS mới (thông qua CLI hoặc console).</li></ol><p><strong>IAM Permissions:</strong></p><p>Bạn cần có quyền tạo các IAM role và policy khi triển khai CloudFormation template. Khi triển khai thông qua AWS Management Console, bạn sẽ cần xác nhận rằng template tạo ra các tài nguyên IAM. Nếu sử dụng AWS CLI, hãy thêm flag <code>--capabilities CAPABILITY_NAMED_IAM</code>.</p><p><strong>Tải xuống template:</strong> Bạn có thể tải xuống <a href=https://d2908q01vomqb2.cloudfront.net/artifacts/MTBlog/cloudops-1899/fis_template.yaml>CloudFormation template tại đây</a> và lưu cục bộ dưới dạng <code>fis_template.yaml</code> trước khi triển khai nó thông qua AWS Console hoặc CLI.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws cloudformation create-stack --stack-name alb-fis-experiment <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --template-body file://fis_template.yaml <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --parameters <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      ParameterKey<span style=color:#f92672>=</span>LoadBalancerName,ParameterValue<span style=color:#f92672>=</span>LoadBalancerName <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      ParameterKey<span style=color:#f92672>=</span>ListenerRuleArn,ParameterValue<span style=color:#f92672>=</span>RuleARN <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>      ParameterKey<span style=color:#f92672>=</span>TestDurationInSeconds,ParameterValue<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --capabilities CAPABILITY_NAMED_IAM
</span></span></code></pre></div><p><code>LoadBalancerName</code> và <code>RuleARN</code> đề cập đến tên Load Balancer và ARN đầy đủ của Listener rule trước dịch vụ mà bạn muốn mô phỏng lỗi. 60 chỉ định thời lượng của lỗi mô phỏng bằng giây.</p><p><strong>Lưu ý:</strong> <code>FISExperimentRole</code> IAM policy sử dụng <code>"Resource": "*"</code> cho các hành động nhất định để cho phép AWS FIS sửa đổi các tài nguyên Load Balancer được tạo động. Bởi vì tên tài nguyên như ARN của target group không được biết tại thời điểm triển khai, nên việc giới hạn phạm vi các quyền này là không khả thi trong ngữ cảnh của bài đăng này. Mặc dù điều này mang lại sự linh hoạt, <a href=https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html>AWS security best practices</a> khuyến nghị giới hạn phạm vi quyền đối với các tài nguyên cụ thể bất cứ khi nào có thể. Nếu bạn biết chính xác các tài nguyên sẽ được sử dụng, hãy cân nhắc cập nhật chính sách để hạn chế quyền truy cập cho phù hợp.</p><h2 id=bước-2-xác-minh-hàm-lambda><strong>Bước 2: Xác minh Hàm Lambda</strong></h2><p>Sau khi triển khai, hãy kiểm tra hàm Lambda trong AWS console để xác nhận nó trả về phản hồi lỗi mong đợi. Hàm phải trả về nội dung như sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;statusCode&#34;</span>: <span style=color:#ae81ff>503</span>,
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;body&#34;</span>: <span style=color:#e6db74>&#34;Service Unavailable - Simulated Error Response&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=bước-3-bắt-đầu-thí-nghiệm-aws-fis><strong>Bước 3: Bắt đầu Thí nghiệm AWS FIS</strong></h2><ol><li>Mở AWS Fault Injection Service console.</li><li>Định vị template được cấu hình sẵn trong Experiment Templates.</li><li>Chọn Start experiment.</li><li>Xác nhận và khởi chạy kiểm tra.</li></ol><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/13/Fis_Console-2.png></p><p><em>Hình 3 AWS FIS console hiển thị experiment template tùy chỉnh được tạo bởi mẫu CloudFormation.</em></p><p>Khi bạn bắt đầu thí nghiệm, AWS FIS sẽ gọi một AWS Systems Manager Automation Document được tạo trong quá trình triển khai. Automation này thực hiện các hành động sau:</p><ol><li><strong>Tạo một ALB target group mới</strong> trỏ đến một hàm Lambda được cấu hình để trả về các error responses mô phỏng.</li><li><strong>Sửa đổi một ALB Listener rule</strong> để chia một phần lưu lượng truy cập đến target group mới này, mô phỏng hiệu quả một lỗi cục bộ.</li><li><strong>Đợi trong một khoảng thời gian xác định</strong> (có thể định cấu hình thông qua CloudFormation template).</li><li><strong>Khôi phục ALB listener rule</strong> về trạng thái ban đầu và xóa target group tạm thời.</li></ol><p>Toàn bộ vòng đời này được tự động hóa — bạn không cần viết bất kỳ mã nào hoặc thực hiện cập nhật thủ công nào cho Load Balancer của mình. Tất cả những gì bạn làm là bắt đầu thí nghiệm từ FIS console và quan sát cách dịch vụ của bạn phản hồi với một trường hợp lỗi cục bộ được kiểm soát.</p><p>Trong ảnh chụp màn hình sau, bạn sẽ thấy quy tắc <strong>Listener ALB</strong> ban đầu chỉ được cấu hình với target group mặc định.</p><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/13/Before.png></p><p><em>Hình 4 ALB listener rule trước khi thí nghiệm bắt đầu, hiển thị một target group duy nhất nhận 100% lưu lượng truy cập.</em></p><p>Sau khi thí nghiệm bắt đầu, AWS FIS sửa đổi rule để chia lưu lượng truy cập — như được hiển thị trong ảnh chụp màn hình Sau.</p><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/13/After.png></p><p><em>Hình 5 ALB listener rule sau khi thí nghiệm bắt đầu, hiển thị một target group mới với Lambda được cấu hình để nhận 50% lưu lượng truy cập và phản hồi bằng một mã lỗi được xác định trước.</em></p><h2 id=bước-4-quan-sát-và-phân-tích-kết-quả><strong>Bước 4: Quan sát và phân tích kết quả</strong></h2><p>Bạn có thể xác thực thí nghiệm bằng cách làm mới <strong>ALB DNS</strong> trong trình duyệt của bạn hoặc chạy một <strong>curl loop</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>while</span> true; <span style=color:#66d9ef>do</span> curl -s http://&lt;your-alb-dns-name&gt;; sleep 1; <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/13/curl_test.gif></p><p><em>Hình 6 Đầu ra CLI động hiển thị các yêu cầu lặp lại đến URL ALB trong một vòng lặp để chứng minh cách giải pháp tiêm lỗi.</em></p><p>Bạn sẽ thấy đầu ra xen kẽ như:</p><ul><li>Backend service is healthy (dịch vụ backend đang hoạt động tốt)</li><li>Service Unavailable – Simulated Error Response (Lambda)</li></ul><p>Bạn có thể giám sát Amazon CloudWatch Logs để xem các chỉ số thực thi hàm Lambda và hành vi của ứng dụng (logic thử lại, cơ chế chuyển đổi dự phòng)</p><p><strong>Lưu ý:</strong> Sau khi bắt đầu thí nghiệm, có thể mất đến một phút trước khi target group mới được gắn vào ALB và lưu lượng truy cập bắt đầu định tuyến đến hàm Lambda. Trong khoảng thời gian ngắn này, tất cả các yêu cầu có thể tiếp tục đến dịch vụ backend ban đầu.</p><h2 id=cơ-chế-khôi-phục><strong>Cơ chế khôi phục</strong></h2><p>Thí nghiệm nhằm mục đích giúp ích cho các hoạt động khôi phục, mặc dù nên kiểm tra trong môi trường của bạn:</p><ul><li>ALB rule sẽ tự động được khôi phục vào cuối thời gian kiểm tra.</li><li>Target group tạm thời được gỡ bỏ và xóa để ngăn chặn bất kỳ cấu hình còn sót lại nào.</li><li>Nếu thí nghiệm bị hủy, quy trình khôi phục sẽ đưa hệ thống trở lại trạng thái ban đầu.</li></ul><h2 id=các-điểm-cần-cân-nhắc><strong>Các điểm cần cân nhắc</strong></h2><p>Bài đăng này cung cấp thông tin kỹ thuật và cấu hình ví dụ. Việc triển khai trong môi trường của bạn có thể yêu cầu thêm các cân nhắc về bảo mật, tuân thủ và kỹ thuật. Luôn kiểm tra kỹ lưỡng trước trong các môi trường phi sản xuất.</p><h2 id=dọn-dẹp><strong>Dọn dẹp</strong></h2><p>Để tránh phát sinh chi phí trong tương lai, hãy xóa các tài nguyên đã triển khai:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws cloudformation delete-stack --stack-name alb-fis-experiment
</span></span></code></pre></div><h2 id=kết-luận><strong>Kết luận</strong></h2><p>Trong bài đăng này, chúng tôi đã chứng minh cách mở rộng khả năng của AWS FIS bằng cách mô phỏng lỗi cục bộ cho các workload đằng sau ALB bằng cách sử dụng Lambda. Giải pháp này cho phép các nhóm kiểm tra khả năng phục hồi của ứng dụng đối với các lỗi không liên tục mà không gây ra sự cố ngừng hoạt động hoàn toàn. Bằng cách tận dụng AWS FIS, Lambda, và các ALB routing rules, bạn có thể tạo ra các kịch bản lỗi có kiểm soát và tăng cường độ vững chắc của hệ thống.</p><p>Để tìm hiểu thêm, hãy khám phá các tài nguyên sau:</p><ul><li><a href=https://docs.aws.amazon.com/fis/latest/userguide/>Tài liệu AWS Fault Injection Service</a></li><li><a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/application/>Tài liệu Amazon ALB</a></li><li><a href=https://docs.aws.amazon.com/fis/latest/userguide/actions-ssm-agent.html>Sử dụng SSM Systems Manager document với AWS FIS</a></li></ul><p>Bắt đầu với <a href=https://d2908q01vomqb2.cloudfront.net/artifacts/MTBlog/cloudops-1899/fis_template.yaml>CloudFormation template</a> và chia sẻ kinh nghiệm của bạn trong phần bình luận bên dưới.</p><p>TAGS: <a href=https://aws.amazon.com/blogs/mt/tag/aws-fault-injection-simulator/>aws fault injection simulator</a>, <a href=https://aws.amazon.com/blogs/mt/tag/chaos-engineering/>chaos engineering</a></p><h3 id=ozgur-canibeyaz>Ozgur Canibeyaz</h3><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/13/canibeya.jpeg></p><p>Ozgur là Senior Technical Account Manager tại Amazon Web Services với 8 năm kinh nghiệm. Ozgur giúp khách hàng tối ưu hóa việc sử dụng AWS của họ bằng cách xử lý các thách thức kỹ thuật, khám phá các cơ hội tiết kiệm chi phí, đạt được sự xuất sắc trong vận hành và xây dựng các dịch vụ sáng tạo bằng các sản phẩm AWS.</p><h3 id=pablo-colazurdo>Pablo Colazurdo</h3><p><img src=https://d2908q01vomqb2.cloudfront.net/972a67c48192728a34979d9a35164c1295401b71/2025/06/15/pablo.png></p><p>Pablo là Principal Solutions Architect tại AWS, nơi anh ấy thích giúp khách hàng ra mắt các dự án thành công trên Cloud. Anh ấy có nhiều năm kinh nghiệm làm việc với nhiều công nghệ đa dạng và đam mê học hỏi những điều mới. Pablo lớn lên ở Argentina nhưng hiện đang tận hưởng cơn mưa ở Ireland trong khi nghe nhạc, đọc sách hoặc chơi D&amp;D với các con.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/3.2-blog2/ title="Blog 2"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.4-blog4/ title="Blog 4" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1761558091></script><script src=../../js/perfect-scrollbar.min.js?1761558091></script><script src=../../js/perfect-scrollbar.jquery.min.js?1761558091></script><script src=../../js/jquery.sticky.js?1761558091></script><script src=../../js/featherlight.min.js?1761558091></script><script src=../../js/highlight.pack.js?1761558091></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1761558091></script><script src=../../js/learn.js?1761558091></script><script src=../../js/hugo-learn.js?1761558091></script><link href=../../mermaid/mermaid.css?1761558091 rel=stylesheet><script src=../../mermaid/mermaid.js?1761558091></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>